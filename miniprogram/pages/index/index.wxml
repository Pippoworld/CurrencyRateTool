<!--index.wxml - ä½¿ç”¨å›ºå®šå®¹å™¨æ”¾ç½®å»ºè®®-->
<view class="container">
  <!-- æ›´æ–°æ—¶é—´ -->
  <view class="update-time-container">
    <text class="update-time-text">æ•°æ®æ›´æ–°äº: {{updateTime}}</text>
  </view>

  <!-- æ±‡ç‡ç›‘æ§å¡ç‰‡ -->
  <view class="rate-header" bindtap="goToRateDetail">
    <!-- ä¸»æ±‡ç‡ï¼ˆå·¦ä¾§ï¼‰ -->
    <view class="rate-info primary-rate">
      <view class="rate-direction">
        <text class="flag">{{primaryFromCurrency.flag}}</text>
        <text class="arrow">â†’</text>
        <text class="flag">{{primaryToCurrency.flag}}</text>
      </view>
      <view class="rate-value-description">
        <text class="rate-prefix">1 {{primaryFromCurrency.name}} â‰ˆ</text>
      </view>
      <view class="rate-display">
        <text class="rate-value">{{primaryRate}}</text>
        <text class="rate-unit">{{primaryToCurrency.name}}</text>
      </view>
      <view class="ai-advice-line {{advice.status}}">
        <text class="advice-icon">{{advice.icon}}</text>
        <text class="advice-text-brief">{{advice.brief}}</text>
      </view>
      <text class="click-tip">* ç‚¹å‡»å¡ç‰‡ä»»æ„ä½ç½®å¯æŸ¥çœ‹è¯¦ç»†åˆ†æ</text>
    </view>
    
    <!-- æ¬¡æ±‡ç‡ï¼ˆå³ä¾§ï¼‰ -->
    <view class="rate-info secondary-rate">
      <view class="rate-direction">
        <text class="flag">{{secondaryFromCurrency.flag}}</text>
        <text class="arrow">â†’</text>
        <text class="flag">{{secondaryToCurrency.flag}}</text>
      </view>
      <view class="rate-value-description small">
        <text class="rate-prefix">1 {{secondaryFromCurrency.name}} â‰ˆ</text>
      </view>
      <view class="rate-display">
        <text class="rate-value small">{{secondaryRate}}</text>
        <text class="rate-unit small">{{secondaryToCurrency.name}}</text>
      </view>
      <text class="rate-change small {{rateChangeStatus}}">{{rateChange}}</text>
    </view>
  </view>

  <!-- æ±‡ç‡è®¡ç®—å™¨ï¼ˆç‹¬ç«‹äºç›‘æ§å¡ç‰‡ï¼‰-->
  <view class="exchange-calculator">
    <view class="calc-header">
      <text class="calc-title">æ±‡ç‡è®¡ç®—å™¨</text>
      <text class="calc-subtitle">ä¸´æ—¶è®¡ç®—ï¼Œä¸å½±å“ç›‘æ§è®¾ç½®</text>
    </view>
    
    <view class="calc-horizontal">
      <!-- ç¬¬ä¸€ä¸ªè´§å¸è¾“å…¥è¡Œ -->
      <view class="currency-input-row">
        <picker bindchange="onFromCurrencyChange" value="{{fromCurrencyIndex}}" range="{{currencies}}" range-key="name">
          <view class="currency-selector-left">
            <text class="currency-flag">{{currencies[fromCurrencyIndex].flag}}</text>
            <text class="currency-code">{{currencies[fromCurrencyIndex].code}}</text>
            <text class="selector-arrow">></text>
          </view>
        </picker>
        <input 
          class="amount-input-right" 
          type="digit" 
          value="{{fromAmount}}" 
          bindinput="onFromAmountInput"
          placeholder="100"
          maxlength="15"
          placeholder-style="color: #94a3b8; font-size: 56rpx; font-weight: 300;"
        />
      </view>
      
      <!-- ç¬¬äºŒä¸ªè´§å¸è¾“å…¥è¡Œ -->
      <view class="currency-input-row">
        <picker bindchange="onToCurrencyChange" value="{{toCurrencyIndex}}" range="{{currencies}}" range-key="name">
          <view class="currency-selector-left">
            <text class="currency-flag">{{currencies[toCurrencyIndex].flag}}</text>
            <text class="currency-code">{{currencies[toCurrencyIndex].code}}</text>
            <text class="selector-arrow">></text>
          </view>
        </picker>
        <input 
          class="amount-input-right" 
          type="digit" 
          value="{{toAmount}}" 
          bindinput="onToAmountInput"
          placeholder="0.00"
          maxlength="15"
          placeholder-style="color: #94a3b8; font-size: 56rpx; font-weight: 300;"
        />
      </view>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ç½‘æ ¼ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="showRateHistory">
      <text class="action-icon">ğŸ“ˆ</text>
      <text class="action-label">æ±‡ç‡èµ°åŠ¿</text>
    </view>
    <view class="action-item" bindtap="showExchangeMethods">
      <text class="action-icon">ğŸ¦</text>
      <text class="action-label">æ¢æ±‡æ¸ é“</text>
    </view>
    <view class="action-item" bindtap="setTargetRate">
      <text class="action-icon">ğŸ¯</text>
      <text class="action-label">ç›®æ ‡æ±‡ç‡</text>
    </view>
    <view class="action-item" bindtap="showMoreCurrencies">
      <text class="action-icon">ğŸ’±</text>
      <text class="action-label">æ›´å¤šå¸ç§</text>
    </view>
  </view>
</view>
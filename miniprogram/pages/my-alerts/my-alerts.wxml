<view class="alerts-container">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <text class="title">æˆ‘çš„æé†’</text>
    <button class="add-btn" bindtap="showCreateAlert">
      <text class="add-icon">+</text>
      <text class="add-text">æ–°å»ºæé†’</text>
    </button>
  </view>

  <!-- æ´»è·ƒæé†’ -->
  <view class="section active-section">
    <view class="section-header">
      <text class="section-title">æ´»è·ƒæé†’</text>
      <text class="section-count">{{activeAlerts.length}}</text>
    </view>
    
    <view class="alerts-list" wx:if="{{activeAlerts.length > 0}}">
      <view class="alert-item" wx:for="{{activeAlerts}}" wx:key="id">
        <view class="alert-content">
          <view class="alert-header">
            <view class="alert-type {{item.type}}">
              <text class="type-icon">{{item.type === 'buy' ? 'ğŸ“‰' : 'ğŸ“ˆ'}}</text>
              <text class="type-text">{{item.type === 'buy' ? 'ä½ä»·ä¹°å…¥' : 'é«˜ä»·å–å‡º'}}</text>
            </view>
            <view class="alert-status">
              <text class="status-dot active"></text>
              <text class="status-text">ç›‘æ§ä¸­</text>
            </view>
          </view>
          
          <view class="alert-details">
            <view class="currency-pair">
              <text class="currency">{{item.fromCurrencyName}}/{{item.toCurrencyName}}</text>
            </view>
            <view class="price-info">
              <text class="target-price">ç›®æ ‡: {{item.price}}</text>
              <text class="trigger-direction">{{item.triggerDirection === 'below' ? 'è·Œç ´æ—¶' : 'çªç ´æ—¶'}}æé†’</text>
            </view>
            <view class="create-time">
              <text class="time-text">åˆ›å»ºäº {{formatTime(item.createTime)}}</text>
            </view>
          </view>
        </view>
        
        <view class="alert-actions">
          <button class="action-btn pause" bindtap="toggleAlert" data-id="{{item.id}}">
            æš‚åœ
          </button>
          <button class="action-btn delete" bindtap="deleteAlert" data-id="{{item.id}}">
            åˆ é™¤
          </button>
        </view>
      </view>
    </view>
    
    <view class="empty-state" wx:if="{{activeAlerts.length === 0}}">
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— æ´»è·ƒæé†’</text>
      <text class="empty-desc">ç‚¹å‡»ä¸Šæ–¹"æ–°å»ºæé†’"å¼€å§‹è®¾ç½®ä»·æ ¼ç›‘æ§</text>
    </view>
  </view>

  <!-- å·²è§¦å‘æé†’ -->
  <view class="section triggered-section" wx:if="{{triggeredAlerts.length > 0}}">
    <view class="section-header">
      <text class="section-title">å·²è§¦å‘æé†’</text>
      <button class="clear-btn" bindtap="clearTriggeredAlerts">
        <text class="clear-text">æ¸…ç©º</text>
      </button>
    </view>
    
    <view class="alerts-list">
      <view class="alert-item triggered" wx:for="{{triggeredAlerts}}" wx:key="id">
        <view class="alert-content">
          <view class="alert-header">
            <view class="alert-type {{item.type}}">
              <text class="type-icon">{{item.type === 'buy' ? 'ğŸ“‰' : 'ğŸ“ˆ'}}</text>
              <text class="type-text">{{item.type === 'buy' ? 'ä½ä»·ä¹°å…¥' : 'é«˜ä»·å–å‡º'}}</text>
            </view>
            <view class="alert-status triggered">
              <text class="status-dot triggered"></text>
              <text class="status-text">å·²è§¦å‘</text>
            </view>
          </view>
          
          <view class="alert-details">
            <view class="currency-pair">
              <text class="currency">{{item.fromCurrencyName}}/{{item.toCurrencyName}}</text>
            </view>
            <view class="price-info">
              <text class="target-price">ç›®æ ‡: {{item.price}}</text>
              <text class="trigger-direction">{{item.triggerDirection === 'below' ? 'è·Œç ´' : 'çªç ´'}}å·²è§¦å‘</text>
            </view>
          </view>
        </view>
        
        <view class="alert-actions">
          <button class="action-btn reset" bindtap="resetAlert" data-id="{{item.id}}">
            é‡æ–°å¯ç”¨
          </button>
          <button class="action-btn delete" bindtap="deleteAlert" data-id="{{item.id}}">
            åˆ é™¤
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- åˆ›å»ºæé†’è¡¨å• -->
  <view class="create-form-mask" wx:if="{{showCreateForm}}" bindtap="hideCreateForm">
    <view class="create-form" catchtap="">
      <view class="form-header">
        <text class="form-title">æ–°å»ºä»·æ ¼æé†’</text>
        <button class="close-btn" bindtap="hideCreateForm">Ã—</button>
      </view>
      
      <view class="form-content">
        <!-- æé†’ç±»å‹é€‰æ‹© -->
        <view class="type-selector">
          <button 
            class="type-btn {{formData.type === 'buy' ? 'active' : ''}}" 
            bindtap="switchAlertType" 
            data-type="buy"
          >
            <text class="type-icon">ğŸ“‰</text>
            <text class="type-label">ä½ä»·ä¹°å…¥æé†’</text>
          </button>
          <button 
            class="type-btn {{formData.type === 'sell' ? 'active' : ''}}" 
            bindtap="switchAlertType" 
            data-type="sell"
          >
            <text class="type-icon">ğŸ“ˆ</text>
            <text class="type-label">é«˜ä»·å–å‡ºæé†’</text>
          </button>
        </view>
        
        <!-- ä»·æ ¼è¾“å…¥ -->
        <view class="price-input-section">
          <text class="input-label">ç›®æ ‡ä»·æ ¼</text>
          <view class="input-row">
            <input 
              class="price-input" 
              type="digit" 
              value="{{formData.price}}" 
              bindinput="onFormInput"
              data-field="price"
              placeholder="è¯·è¾“å…¥ç›®æ ‡ä»·æ ¼"
            />
            <text class="currency-unit">{{formData.toCurrency}}</text>
          </view>
          <text class="input-hint">
            {{formData.type === 'buy' ? 'å½“æ±‡ç‡è·Œè‡³æ­¤ä»·æ ¼æ—¶æé†’æ‚¨' : 'å½“æ±‡ç‡æ¶¨è‡³æ­¤ä»·æ ¼æ—¶æé†’æ‚¨'}}
          </text>
        </view>
        
        <!-- è´§å¸å¯¹æ˜¾ç¤º -->
        <view class="currency-display">
          <text class="currency-label">ç›‘æ§è´§å¸å¯¹</text>
          <text class="currency-pair">{{formData.fromCurrencyName}}/{{formData.toCurrencyName}}</text>
        </view>
      </view>
      
      <view class="form-actions">
        <button class="cancel-btn" bindtap="hideCreateForm">å–æ¶ˆ</button>
        <button class="save-btn" bindtap="saveAlert">ä¿å­˜æé†’</button>
      </view>
    </view>
  </view>
</view> 
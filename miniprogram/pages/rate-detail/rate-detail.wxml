<view class="container">
  <!-- å½“å‰æ±‡ç‡æ˜¾ç¤º -->
  <view class="rate-display">
    <view class="rate-pair">
      <text class="currency-info">{{currencies[fromCurrencyIndex].flag}} {{currencies[fromCurrencyIndex].name}}</text>
      <text class="rate-arrow">â†’</text>
      <text class="currency-info">{{currencies[toCurrencyIndex].flag}} {{currencies[toCurrencyIndex].name}}</text>
    </view>
    <text class="current-rate">{{currentRate}}</text>
    <text class="rate-change">{{rateChange}}</text>
    <text class="update-time">æ›´æ–°æ—¶é—´ï¼š{{updateTime}}</text>
  </view>

  <!-- AI æ¢æ±‡å»ºè®® -->
  <view class="card ai-analysis">
    <view class="card-header">
      <view class="card-icon">ğŸ¤–</view>
      <view>
        <text class="card-title">AI æ¢æ±‡å»ºè®®</text>
        <text class="card-desc">åŸºäºå®æ—¶æ±‡ç‡çš„æ™ºèƒ½æ¢æ±‡åˆ†æ</text>
      </view>
    </view>
    
    <view class="card-content">
      <view class="analysis-status">
        <view class="status-indicator {{aiAnalysis.status}}"></view>
        <text class="status-text">{{aiAnalysis.title}}</text>
        <view class="confidence-score">
          <text class="confidence-label">å¯ä¿¡åº¦</text>
          <text class="confidence-value">{{aiAnalysis.confidence}}%</text>
        </view>
      </view>
      
      <text class="analysis-summary">{{aiAnalysis.summary}}</text>
      
      <view class="analysis-factors">
        <text class="factors-title">åˆ†æè¦ç‚¹ï¼š</text>
        <view class="factor-item" wx:for="{{aiAnalysis.factors}}" wx:key="index">
          <text class="factor-icon">â€¢</text>
          <text class="factor-text">{{item}}</text>
        </view>
      </view>
      
      <view class="analysis-suggestion">
        <text class="suggestion-title">æ¢æ±‡å»ºè®®ï¼š</text>
        <text class="suggestion-text">{{aiAnalysis.suggestion}}</text>
      </view>
    </view>
  </view>

  <!-- æ™ºèƒ½æé†’è®¾ç½® -->
  <view class="card alert-recommendations">
    <view class="card-header">
      <view class="card-icon">ğŸ””</view>
      <view>
        <text class="card-title">æ™ºèƒ½æé†’</text>
        <text class="card-desc">AI æ¨èçš„æœ€ä½³æ¢æ±‡æ—¶æœºæé†’</text>
      </view>
    </view>
    
    <view class="card-content">
      <view class="recommendation-cards">
        <!-- ä¹°å…¥æé†’ -->
        <view class="recommendation-card buy-alert">
          <view class="rec-header">
            <text class="rec-icon">ğŸ“ˆ</text>
            <view class="rec-content">
              <text class="rec-title">ä½ä½æ¢æ±‡æé†’</text>
              <text class="rec-desc">æ±‡ç‡å›è½è‡³æ­¤ä»·ä½æ—¶æé†’æ¢æ±‡</text>
            </view>
          </view>
          <view class="rec-price">
            <text class="price-value">{{alertSuggestions.buyAlert.price}}</text>
            <text class="price-reason">{{alertSuggestions.buyAlert.reason}}</text>
          </view>
          <button class="set-alert-btn buy" bindtap="quickSetAlert" data-type="buy" data-price="{{alertSuggestions.buyAlert.price}}">
            è®¾ç½®æé†’
          </button>
        </view>

        <!-- å–å‡ºæé†’ -->
        <view class="recommendation-card sell-alert">
          <view class="rec-header">
            <text class="rec-icon">ğŸ“‰</text>
            <view class="rec-content">
              <text class="rec-title">é«˜ä½å‡ºæ‰‹æé†’</text>
              <text class="rec-desc">æ±‡ç‡å‡è‡³æ­¤ä»·ä½æ—¶æé†’æ¢æ±‡</text>
            </view>
          </view>
          <view class="rec-price">
            <text class="price-value">{{alertSuggestions.sellAlert.price}}</text>
            <text class="price-reason">{{alertSuggestions.sellAlert.reason}}</text>
          </view>
          <button class="set-alert-btn sell" bindtap="quickSetAlert" data-type="sell" data-price="{{alertSuggestions.sellAlert.price}}">
            è®¾ç½®æé†’
          </button>
        </view>
      </view>

      <!-- å¿«é€Ÿè®¾ç½® -->
      <view class="quick-alerts">
        <text class="quick-title">å¿«é€Ÿè®¾ç½®å…¶ä»–æé†’ï¼š</text>
        <view class="quick-buttons-horizontal">
          <button class="quick-alert-btn" bindtap="setQuickTarget" data-type="buy" data-percent="-1">ä½1%</button>
          <button class="quick-alert-btn" bindtap="setQuickTarget" data-type="buy" data-percent="-3">ä½3%</button>
          <button class="quick-alert-btn" bindtap="setQuickTarget" data-type="sell" data-percent="1">é«˜1%</button>
          <button class="quick-alert-btn" bindtap="setQuickTarget" data-type="sell" data-percent="3">é«˜3%</button>
        </view>
      </view>

      <!-- æˆ‘çš„æé†’å…¥å£ -->
      <view class="my-alerts-entry">
        <button class="manage-alerts-btn" bindtap="goToMyAlerts">
          <text class="manage-icon">âš™ï¸</text>
          <text class="manage-text">ç®¡ç†æˆ‘çš„æé†’</text>
          <text class="manage-arrow">â€º</text>
        </button>
      </view>
    </view>
  </view>

  <!-- ç›®æ ‡æ±‡ç‡è®¾ç½® -->
  <view class="card target-rate-section">
    <view class="card-header">
      <view class="card-icon">ğŸ¯</view>
      <view>
        <text class="card-title">ç›®æ ‡æ±‡ç‡è®¾ç½®</text>
        <text class="card-desc">è®¾ç½®ç†æƒ³æ±‡ç‡ï¼Œåˆ°è¾¾æ—¶è‡ªåŠ¨æé†’</text>
      </view>
    </view>
    
    <view class="card-content">
      <view class="target-inputs">
        <view class="input-row">
          <text class="input-label">ä½ä½æ¢æ±‡</text>
          <input 
            class="target-input" 
            type="digit" 
            value="{{targetBuyRate}}" 
            bindinput="onTargetBuyInput"
            placeholder="{{currentRate}}"
          />
          <text class="input-unit">{{currencies[toCurrencyIndex].code}}</text>
        </view>
        
        <view class="input-row">
          <text class="input-label">é«˜ä½æé†’</text>
          <input 
            class="target-input" 
            type="digit" 
            value="{{targetSellRate}}" 
            bindinput="onTargetSellInput"
            placeholder="{{currentRate}}"
          />
          <text class="input-unit">{{currencies[toCurrencyIndex].code}}</text>
        </view>
        
        <view class="quick-targets">
          <text class="quick-title">å¿«é€Ÿè®¾ç½®ï¼š</text>
          <view class="quick-buttons">
            <button class="quick-btn" bindtap="setQuickTarget" data-type="buy" data-percent="-2">ä½2%</button>
            <button class="quick-btn" bindtap="setQuickTarget" data-type="buy" data-percent="-5">ä½5%</button>
            <button class="quick-btn" bindtap="setQuickTarget" data-type="sell" data-percent="2">é«˜2%</button>
            <button class="quick-btn" bindtap="setQuickTarget" data-type="sell" data-percent="5">é«˜5%</button>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- é“¶è¡Œæ±‡ç‡å¯¹æ¯” -->
  <view class="card" wx:if="{{bankRates.length > 0}}">
    <view class="card-header">
      <view class="card-icon">ğŸ¦</view>
      <view>
        <text class="card-title">é“¶è¡Œæ±‡ç‡å¯¹æ¯”</text>
        <text class="card-desc">ä¸»è¦é“¶è¡Œ{{currencies[toCurrencyIndex].name}}æ±‡ç‡å‚è€ƒ</text>
      </view>
    </view>
    
    <view class="card-content">
      <view class="bank-rates">
        <view class="bank-item" wx:for="{{bankRates}}" wx:key="name">
          <view class="bank-info">
            <text class="bank-name">{{item.name}}</text>
            <text class="bank-type">{{item.type}}</text>
          </view>
          <view class="bank-prices">
            <view class="price-item buy">
              <text class="price-label">ä¹°å…¥</text>
              <text class="price-value">{{item.buy}}</text>
            </view>
            <view class="price-item sell">
              <text class="price-label">å–å‡º</text>
              <text class="price-value">{{item.sell}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- é•¿æœŸç›‘æ§è®¾ç½® -->
  <view class="card monitoring-section">
    <view class="card-header">
      <view class="card-icon">ğŸ“Š</view>
      <view>
        <text class="card-title">é•¿æœŸç›‘æ§</text>
        <text class="card-desc">è¿½è¸ªæ±‡ç‡è¶‹åŠ¿ï¼Œè·å–å®šæœŸæŠ¥å‘Š</text>
      </view>
    </view>
    
    <view class="card-content">
      <view class="monitoring-options">
        <view class="option-item">
          <view class="option-left">
            <text class="option-title">ä»·æ ¼æé†’</text>
            <text class="option-desc">æ±‡ç‡è¾¾åˆ°ç›®æ ‡æ—¶æ¨é€é€šçŸ¥</text>
          </view>
          <switch 
            class="option-switch" 
            checked="{{isPriceAlertEnabled}}" 
            bindchange="onPriceAlertChange"
          />
        </view>
        
        <view class="option-item">
          <view class="option-left">
            <text class="option-title">æ¯æ—¥æŠ¥å‘Š</text>
            <text class="option-desc">æ¯å¤©æ±‡ç‡å˜åŒ–æ€»ç»“</text>
          </view>
          <switch 
            class="option-switch" 
            checked="{{isDailyReportEnabled}}" 
            bindchange="onDailyReportChange"
          />
        </view>
        
        <view class="option-item">
          <view class="option-left">
            <text class="option-title">è¶‹åŠ¿åˆ†æ</text>
            <text class="option-desc">æ¯å‘¨è¶‹åŠ¿å˜åŒ–åˆ†æ</text>
          </view>
          <switch 
            class="option-switch" 
            checked="{{isTrendAnalysisEnabled}}" 
            bindchange="onTrendAnalysisChange"
          />
        </view>
      </view>
      
      <view class="monitoring-stats">
        <text class="stats-title">ç›‘æ§ç»Ÿè®¡</text>
        <view class="stats-grid">
          <view class="stat-item">
            <text class="stat-value">{{monitoringDays}}</text>
            <text class="stat-label">ç›‘æ§å¤©æ•°</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">{{alertCount}}</text>
            <text class="stat-label">è§¦å‘æé†’</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">{{maxRate}}</text>
            <text class="stat-label">æœ€é«˜æ±‡ç‡</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">{{minRate}}</text>
            <text class="stat-label">æœ€ä½æ±‡ç‡</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¸ç§è®¾ç½®åŒºåŸŸ -->
  <view class="card currency-settings">
    <view class="card-header">
      <view class="card-icon">ğŸ’±</view>
      <view>
        <text class="card-title">å¸ç§è®¾ç½®</text>
        <text class="card-desc">é€‰æ‹©æŒæœ‰å’Œç›®æ ‡è´§å¸</text>
      </view>
    </view>
    
    <view class="card-content">
      <view class="setting-section">
        <view class="section-header">
          <text class="section-title">æŒæœ‰å¸ç§</text>
          <text class="section-desc">é€‰æ‹©æ‚¨å½“å‰æŒæœ‰çš„è´§å¸</text>
        </view>
        <picker bindchange="onFromCurrencyChange" value="{{fromCurrencyIndex}}" range="{{currencies}}" range-key="name">
          <view class="currency-picker">
            <view class="picker-content">
              <text class="currency-flag">{{currencies[fromCurrencyIndex].flag}}</text>
              <view class="currency-details">
                <text class="currency-name">{{currencies[fromCurrencyIndex].name}}</text>
                <text class="currency-code">{{currencies[fromCurrencyIndex].code}}</text>
              </view>
            </view>
            <text class="picker-arrow">â€º</text>
          </view>
        </picker>
      </view>

      <view class="setting-section">
        <view class="section-header">
          <text class="section-title">ç›®æ ‡å¸ç§</text>
          <text class="section-desc">é€‰æ‹©æ‚¨è¦å…‘æ¢çš„ç›®æ ‡è´§å¸</text>
        </view>
        <picker bindchange="onToCurrencyChange" value="{{toCurrencyIndex}}" range="{{currencies}}" range-key="name">
          <view class="currency-picker">
            <view class="picker-content">
              <text class="currency-flag">{{currencies[toCurrencyIndex].flag}}</text>
              <view class="currency-details">
                <text class="currency-name">{{currencies[toCurrencyIndex].name}}</text>
                <text class="currency-code">{{currencies[toCurrencyIndex].code}}</text>
              </view>
            </view>
            <text class="picker-arrow">â€º</text>
          </view>
        </picker>
      </view>
    </view>
  </view>

  <!-- ç•™å­¦å°è´´å£« -->
  <view class="card tips-section">
    <view class="card-header">
      <view class="card-icon">ğŸ’¡</view>
      <view>
        <text class="card-title">æ¢æ±‡å°è´´å£«</text>
        <text class="card-desc">ç•™å­¦ç”Ÿæ¢æ±‡å®ç”¨å»ºè®®</text>
      </view>
    </view>
    
    <view class="card-content">
      <view class="tip-card">
        <view class="tip-header">
          <text class="tip-icon">ğŸ’°</text>
          <text class="tip-title">æ¢æ±‡ç­–ç•¥</text>
        </view>
        <view class="tip-content">
          <text class="tip-text">å»ºè®®åˆ†æ‰¹æ¢æ±‡ï¼Œé¿å…æ±‡ç‡æ³¢åŠ¨é£é™©ã€‚æ¯æ¬¡æ¢æ±‡1-2ä¸ªæœˆçš„è´¹ç”¨æ¯”è¾ƒåˆé€‚ã€‚</text>
          <view class="tip-list">
            <text class="tip-item">â€¢ å…³æ³¨æ±‡ç‡è¶‹åŠ¿ï¼Œåœ¨ç›¸å¯¹ä½ä½æ¢æ±‡</text>
            <text class="tip-item">â€¢ é¿å…åœ¨æ±‡ç‡é«˜ç‚¹ä¸€æ¬¡æ€§å¤§é¢æ¢æ±‡</text>
            <text class="tip-item">â€¢ ç´§æ€¥è´¹ç”¨å’Œæ—¥å¸¸è´¹ç”¨åˆ†å¼€æ¢æ±‡</text>
          </view>
        </view>
      </view>

      <view class="tip-card">
        <view class="tip-header">
          <text class="tip-icon">ğŸ¦</text>
          <text class="tip-title">æ¢æ±‡æ¸ é“</text>
        </view>
        <view class="tip-content">
          <text class="tip-text">é€‰æ‹©æ­£è§„æ¸ é“æ¢æ±‡ï¼Œç¡®ä¿èµ„é‡‘å®‰å…¨ã€‚</text>
          <view class="tip-list">
            <text class="tip-item">â€¢ é“¶è¡Œï¼šæœ€å®‰å…¨ï¼Œä½†æ±‡ç‡å¯èƒ½ä¸æ˜¯æœ€ä¼˜</text>
            <text class="tip-item">â€¢ å¤–æ±‡å¹³å°ï¼šæ±‡ç‡è¾ƒå¥½ï¼Œæ³¨æ„é€‰æ‹©æœ‰ç›‘ç®¡çš„å¹³å°</text>
            <text class="tip-item">â€¢ é¿å…ç§äººæ¢æ±‡ï¼Œå­˜åœ¨æ³•å¾‹é£é™©</text>
          </view>
        </view>
      </view>

      <view class="tip-card warning">
        <view class="tip-header">
          <text class="tip-icon">âš ï¸</text>
          <text class="tip-title">é£é™©æé†’</text>
        </view>
        <view class="warning-content">
          <text class="warning-title">æ¢æ±‡æ³¨æ„äº‹é¡¹ï¼š</text>
          <view class="warning-list">
            <text class="warning-item">â€¢ æ³¨æ„ä¸ªäººå¹´åº¦è´­æ±‡é¢åº¦é™åˆ¶</text>
            <text class="warning-item">â€¢ ä¿ç•™æ¢æ±‡å‡­è¯ï¼Œä¾¿äºåç»­æ“ä½œ</text>
            <text class="warning-item">â€¢ äº†è§£ç›®æ ‡å›½å®¶çš„å¤–æ±‡ç®¡åˆ¶æ”¿ç­–</text>
            <text class="warning-item">â€¢ å¤§é¢æ¢æ±‡éœ€æå‰é¢„çº¦é“¶è¡Œ</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="swap-btn" bindtap="swapCurrencies">
      <text class="swap-icon">â‡„</text>
      <text>äº¤æ¢å¸ç§</text>
    </button>
    <button class="save-btn" bindtap="saveSettings">
      <text>ä¿å­˜è®¾ç½®</text>
    </button>
  </view>
</view> 
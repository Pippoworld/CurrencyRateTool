<view class="container">
  <!-- æ±‡ç‡å¤§ç›˜æ€»è§ˆ -->
  <view class="card">
    <view class="card-header">
      ğŸŒ æ±‡ç‡å¤§ç›˜
    </view>
    <view class="card-body">
      <view class="market-overview">
        <view class="overview-stats">
          <view class="stat-item">
            <text class="stat-label">ä¸Šæ¶¨</text>
            <text class="stat-value up">{{marketStats.up}}</text>
          </view>
          <view class="stat-item">
            <text class="stat-label">ä¸‹è·Œ</text>
            <text class="stat-value down">{{marketStats.down}}</text>
          </view>
          <view class="stat-item">
            <text class="stat-label">å¹³ç›˜</text>
            <text class="stat-value flat">{{marketStats.flat}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ä¸»è¦è´§å¸æ±‡ç‡çœ‹æ¿ -->
  <view class="card">
    <view class="card-header">
      ğŸ’° ä¸»è¦è´§å¸æ±‡ç‡
    </view>
    <view class="card-body">
      <view class="currency-list">
        <view class="currency-item" wx:for="{{currencyRates}}" wx:key="code" bindtap="selectCurrency" data-currency="{{item}}">
          <view class="currency-info">
            <text class="currency-flag">{{item.flag}}</text>
            <view class="currency-detail">
              <text class="currency-name">{{item.name}}</text>
              <text class="currency-code">{{item.code}}</text>
            </view>
          </view>
          <view class="rate-info">
            <text class="current-rate">{{item.rate}}</text>
            <view class="rate-change {{item.changeStatus}}">
              <text class="change-icon">{{item.changeIcon}}</text>
              <text class="change-value">{{item.change}}</text>
              <text class="change-percent">({{item.changePercent}}%)</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ±‡ç‡èµ°åŠ¿å›¾è¡¨ -->
  <view class="card">
    <view class="card-header">
      ğŸ“ˆ {{selectedCurrency.flag}} {{selectedCurrency.name}} èµ°åŠ¿å›¾
    </view>
    <view class="card-body">
      <view class="chart-controls">
        <view class="time-tabs">
          <text class="time-tab {{timeRange === '1D' ? 'active' : ''}}" bindtap="changeTimeRange" data-range="1D">1æ—¥</text>
          <text class="time-tab {{timeRange === '7D' ? 'active' : ''}}" bindtap="changeTimeRange" data-range="7D">7æ—¥</text>
          <text class="time-tab {{timeRange === '30D' ? 'active' : ''}}" bindtap="changeTimeRange" data-range="30D">30æ—¥</text>
          <text class="time-tab {{timeRange === '90D' ? 'active' : ''}}" bindtap="changeTimeRange" data-range="90D">90æ—¥</text>
        </view>
      </view>
      
      <view class="chart-container">
        <view class="chart-line" wx:for="{{chartData}}" wx:key="index">
          <view class="chart-point" style="height: {{item.height}}%; background: {{item.color}};" bindtap="showChartPoint" data-point="{{item}}"></view>
          <text class="chart-label">{{item.label}}</text>
        </view>
      </view>
      
      <view class="chart-summary">
        <view class="summary-item">
          <text class="summary-label">æœ€é«˜</text>
          <text class="summary-value">{{chartSummary.high}}</text>
        </view>
        <view class="summary-item">
          <text class="summary-label">æœ€ä½</text>
          <text class="summary-value">{{chartSummary.low}}</text>
        </view>
        <view class="summary-item">
          <text class="summary-label">æ³¢å¹…</text>
          <text class="summary-value">{{chartSummary.range}}%</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ±‡ç‡æ’è¡Œæ¦œ -->
  <view class="card">
    <view class="card-header">
      ğŸ† æ±‡ç‡æ’è¡Œæ¦œ
    </view>
    <view class="card-body">
      <view class="ranking-tabs">
        <text class="ranking-tab {{rankingType === 'gainers' ? 'active' : ''}}" bindtap="changeRanking" data-type="gainers">æ¶¨å¹…æ¦œ</text>
        <text class="ranking-tab {{rankingType === 'losers' ? 'active' : ''}}" bindtap="changeRanking" data-type="losers">è·Œå¹…æ¦œ</text>
        <text class="ranking-tab {{rankingType === 'volume' ? 'active' : ''}}" bindtap="changeRanking" data-type="volume">æ³¢åŠ¨æ¦œ</text>
      </view>
      
      <view class="ranking-list">
        <view class="ranking-item" wx:for="{{rankingData}}" wx:key="code">
          <text class="ranking-number">{{index + 1}}</text>
          <view class="ranking-currency">
            <text class="currency-flag">{{item.flag}}</text>
            <text class="currency-name">{{item.name}}</text>
          </view>
          <view class="ranking-value {{item.valueStatus}}">
            <text class="value-text">{{item.value}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ±‡ç‡å¯¹æ¯”å·¥å…· -->
  <view class="card compare-card">
    <view class="card-header">
      <view class="header-with-icon">
        <view class="header-icon">ğŸ”„</view>
        <text class="header-title">æ±‡ç‡å¯¹æ¯”</text>
        <text class="header-subtitle">é€‰æ‹©å¤šç§è´§å¸è¿›è¡Œæ±‡ç‡å¯¹æ¯”åˆ†æ</text>
      </view>
    </view>
    <view class="card-body">
      <view class="compare-section">
        <view class="compare-selector">
          <text class="selector-label">ğŸ“‹ é€‰æ‹©å¯¹æ¯”è´§å¸</text>
          <view class="currency-grid">
            <view class="currency-card {{item.selected ? 'selected' : ''}}" 
                  wx:for="{{compareCurrencies}}" 
                  wx:key="code" 
                  bindtap="toggleCompareCurrency" 
                  data-currency="{{item}}">
              <view class="currency-card-content">
                <text class="currency-flag-large">{{item.flag}}</text>
                <text class="currency-code-main">{{item.code}}</text>
                <text class="currency-name-sub">{{item.name}}</text>
              </view>
              <view class="selection-indicator {{item.selected ? 'active' : ''}}">
                <text class="check-icon">âœ“</text>
              </view>
            </view>
          </view>
        </view>
        
        <view class="compare-result" wx:if="{{compareResult.length > 0}}">
          <text class="result-title">ğŸ“Š å¯¹æ¯”ç»“æœ</text>
          <view class="compare-list">
            <view class="compare-item-enhanced" wx:for="{{compareResult}}" wx:key="code">
              <view class="compare-left">
                <text class="compare-flag">{{item.flag}}</text>
                <view class="compare-info">
                  <text class="compare-currency">{{item.name}}</text>
                  <text class="compare-code">{{item.code}}</text>
                </view>
              </view>
              <view class="compare-right">
                <text class="compare-rate">{{item.rate}}</text>
                <view class="compare-diff {{item.diffStatus}}">
                  <text class="diff-icon">{{item.diffStatus === 'positive' ? 'ğŸ“ˆ' : 'ğŸ“‰'}}</text>
                  <text class="diff-value">{{item.diff}}</text>
                </view>
              </view>
            </view>
          </view>
        </view>
        
        <view class="compare-empty" wx:if="{{compareResult.length === 0}}">
          <text class="empty-icon">ğŸ“</text>
          <text class="empty-text">è¯·é€‰æ‹©è´§å¸è¿›è¡Œå¯¹æ¯”</text>
          <text class="empty-subtitle">ç‚¹å‡»ä¸Šæ–¹è´§å¸å¡ç‰‡å¼€å§‹å¯¹æ¯”</text>
        </view>
      </view>
      
      <view class="action-buttons-enhanced">
        <button class="btn-enhanced primary" bindtap="goToCalculator">
          <text class="btn-icon">ğŸ§®</text>
          <text class="btn-text">æ±‡ç‡è®¡ç®—å™¨</text>
        </button>
        <button class="btn-enhanced secondary" bindtap="goToMonitoring">
          <text class="btn-icon">ğŸ“Š</text>
          <text class="btn-text">æ·»åŠ ç›‘æ§</text>
        </button>
        <button class="btn-enhanced tertiary" bindtap="refreshRates">
          <text class="btn-icon">ğŸ”„</text>
          <text class="btn-text">åˆ·æ–°æ±‡ç‡</text>
        </button>
      </view>
    </view>
  </view>

  <!-- å¸‚åœºå¿«è®¯ -->
  <view class="card">
    <view class="card-header">
      ğŸ“° å¸‚åœºå¿«è®¯
    </view>
    <view class="card-body">
      <view class="news-section">
        <view class="news-item" wx:for="{{marketNews}}" wx:key="index" bindtap="openNewsDetail" data-url="{{item.url}}">
          <view class="news-content">
            <text class="news-title">{{item.title}}</text>
            <text class="news-summary">{{item.summary}}</text>
            <view class="news-meta">
              <text class="news-source">{{item.source}}</text>
              <text class="news-time">{{item.time}}</text>
              <text class="news-impact {{item.impactLevel}}">{{item.impact}}</text>
            </view>
          </view>
          <text class="news-arrow">â€º</text>
        </view>
      </view>
    </view>
  </view>
</view> 